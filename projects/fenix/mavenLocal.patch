From b02becbd58d5f644d36d5dbfddfba24b8223d566 Mon Sep 17 00:00:00 2001
From: Georg Koppen <gk@torproject.org>
Date: Tue, 21 Apr 2020 11:03:13 +0000
Subject: [PATCH] Bug 33927: Use local maven repository for gradle dependencies


diff --git a/build.gradle b/build.gradle
index be0fcc46..cbca997a 100644
--- a/build.gradle
+++ b/build.gradle
@@ -3,6 +3,7 @@
 buildscript {
     // This logic is duplicated in the allprojects block: I don't know how to fix that.
     repositories {
+        mavenLocal()
         maven {
             url "https://nightly.maven.mozilla.org/maven2"
             content {
@@ -59,6 +60,7 @@ plugins {
 allprojects {
     // This logic is duplicated in the buildscript block: I don't know how to fix that.
     repositories {
+        mavenLocal()
         maven {
             url "https://nightly.maven.mozilla.org/maven2"
             content {
diff --git a/buildSrc/build.gradle.kts b/buildSrc/build.gradle.kts
index f7bcc37a..9ba05d2e 100644
--- a/buildSrc/build.gradle.kts
+++ b/buildSrc/build.gradle.kts
@@ -7,5 +7,6 @@ plugins {
 }
 
 repositories {
+    mavenLocal()
     jcenter()
 }
diff --git a/buildSrc/settings.gradle.kts b/buildSrc/settings.gradle.kts
new file mode 100644
index 00000000..a7066edc
--- /dev/null
+++ b/buildSrc/settings.gradle.kts
@@ -0,0 +1,5 @@
+pluginManagement {
+  repositories {
+    mavenLocal()
+  }
+}
diff --git a/settings.gradle b/settings.gradle
index ccbec816..6424829b 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -1,3 +1,9 @@
+pluginManagement {
+  repositories {
+    mavenLocal()
+  }
+}
+
 include ':app'
 
 include ':mozilla-detekt-rules'
-- 
2.26.2

