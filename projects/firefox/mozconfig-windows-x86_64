CROSS_COMPILE=1

HOST_CC="clang"
HOST_CXX="clang++"
CC="x86_64-w64-mingw32-clang"
CXX="x86_64-w64-mingw32-clang++"
CXXFLAGS="-fms-extensions"
CPP="x86_64-w64-mingw32-clang -E"
AR=llvm-ar
RANLIB=llvm-ranlib

clang_path=/var/tmp/dist/mingw-w64-clang

# For Stylo
BINDGEN_CFLAGS="-I$clang_path/x86_64-w64-mingw32/include/c++/v1 -I$clang_path/lib/clang/8.0.0/include -I$clang_path/x86_64-w64-mingw32/include"

LDFLAGS="-Wl,-S"
STRIP=/bin/true
OBJCOPY=/bin/true

ac_add_options --enable-application=browser
ac_add_options --target=x86_64-w64-mingw32
ac_add_options --with-toolchain-prefix=x86_64-w64-mingw32-
ac_add_options --enable-default-toolkit=cairo-windows
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj-mingw
mk_add_options MOZ_APP_DISPLAYNAME="Tor Browser"
mk_add_options MOZILLA_OFFICIAL=1
export MOZILLA_OFFICIAL=1
mk_add_options BUILD_OFFICIAL=1

ac_add_options --disable-debug
ac_add_options --enable-optimize
ac_add_options --enable-strip
ac_add_options --enable-official-branding

ac_add_options --enable-tor-browser-update
ac_add_options --enable-signmar
ac_add_options --enable-verify-mar

# Let's make sure no preference is enabling either Adobe's or Google's CDM.
ac_add_options --disable-eme
ac_add_options --disable-crashreporter
ac_add_options --disable-maintenance-service
ac_add_options --disable-webrtc
ac_add_options --disable-tests
ac_add_options --disable-geckodriver # Bug 1489320
ac_add_options --disable-sandbox # Does not compile currently
ac_add_options --disable-jemalloc # Bugzilla 1466192
